<!DOCTYPE html>
<html>
  <head>
    <title>Blog zur Softwareentwicklung | Dennis Reimann, Softwareentwickler</title>
    <script src='/javascripts/head.min.js'></script>
    <script type='text/javascript'>
      //<![CDATA[
        head.js(
          "https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js",
          "http://www.google-analytics.com/ga.js",
          "/fancybox/jquery.fancybox-1.3.4.pack.js",
          "/fancybox/jquery.easing-1.3.pack.js",
          "/javascripts/website.js",
          function(){Website.init()});
      //]]>
    </script>
    <link href='/atom.xml' rel='alternate' title='//dennisreimann' type='application/atom+xml' />
    <link href='/stylesheets/print.css' media='print' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/screen.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://dennisreimann.de/articles' rel='canonical' />
    <link href='http://openid.dennisreimann.de/server' rel='openid2.provider openid.server' />
    <link href='http://openid.dennisreimann.de/dennisreimann' rel='openid2.local_id openid.delegate' />
    <!--[if IE]>
      <link href='/stylesheets/ie.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <![endif]-->
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta content='BRi3ql7JvxxFP2KtBRHIV6Rfzn0ZN7xJF1NNtnEUaI8' name='google-site-verification' />
    <meta content='Artikel zur Webentwicklung mit Ruby on Rails, testgetriebener Entwicklung mit Cucumber und RSpec und Frontendentwicklung mit HTML5 und JavaScript' name='description' />
    <meta content='Ruby, Rails, JavaScript, HTML5, TDD, RSpec, CoffeeScript, Backbone.js, Git, Mobile' name='keywords' />
  </head>
  <body>
    <div id="header">
      <div id='identity'>
        <a href='/' id='logo'>
          <span id='slashes'>//</span>
          <span id='name'>dennisreimann</span>
        </a>
        <div id='claim'>
          Softwareentwickler
        </div>
      </div>
    </div>
    <div id="main"><section id="articles">&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2013-12-17T19:25:00+01:00">&#x000A;        <div class="top">Dec 13</div>&#x000A;        <div class="day">17</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/switch-to-freemium">Switching to Freemium</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>A few weeks ago - on November 7th - I changed the price model of <a href="http://ioctocat.com">iOctocat</a>&#x000A;to freemium. The initial download became free and it offers most of the features the full pro version&#x000A;has, but limited to public repositories. The pro upgrade is available as an in-app purchase and gives&#x000A;access to private repositories, adds support for multiple accounts and Gitub Enterprise, as well as&#x000A;push notifications. The upgrade costs $9.99 (or 8,99 EUR), which is just as much as before the switch.</p>&#x000A;&#x000A;<p>There were four reasons for deciding to change the price model:</p>&#x000A;&#x000A;<ol>&#x000A;<li><em>A potentially bigger market:</em> Seeing <a href="https://github.com/blog/1470-five-years">GitHub&#8217;s growth</a> compared&#x000A;to the low number of sales I am making (more on that later), the assumption is that there is a bigger&#x000A;market to tackle, which I am currently not reaching.</li>&#x000A;<li><em>Stagnating sales:</em> This is the main reason to face the fact something might need&#x000A;improvement. Of course this could be related to other things as well, but my impression from conversations&#x000A;was that a good percentage of people were put off by the high price (at least in App Store terms) of the app&#x000A;and they had no good way to find out, whether or not the investment would be worth it.</li>&#x000A;<li>The ever present <em>lack of demo versions:</em> I do not want to bemoan the fact that Apple does not seem to care&#x000A;and leaves it to each developer to find the right way to approach this*, but from the users perspective I can&#x000A;totally understand that trying apps is kind of the only way to verify whether or not it is worth its price.</li>&#x000A;<li><em>Kick it like GitHub:</em> I just like the fact, that the new price model fits very well with GitHub offering its&#x000A;functionality for free for open source projects. This makes it a natural fit and was the final trigger to make&#x000A;me want to do the switch.</li>&#x000A;</ol>&#x000A;&#x000A;&#x000A;<p>So let&#8217;s get to the interesting part: Sales figures and actual numbers.</p>&#x000A;&#x000A;<h3>Before</h3>&#x000A;&#x000A;<p>First off, the last 30 days before the switch, which can be considered a good baseline of how v2 was selling&#x000A;in general up to then:</p>&#x000A;&#x000A;<ul>&#x000A;<li>266 paid sales/downloads</li>&#x000A;<li>1397 EUR revenue</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<p><a href="/images/content/ioctocat_before_freemium.png"><img src="/images/content/ioctocat_before_freemium.png" alt="iOctocat paid sales before the freemium switch" /></a></p>&#x000A;&#x000A;<p>As you can see this is a bumpy mixture of sales varying from 5 to 14, averaging at around 9 sales per day.&#x000A;It seems that deviations like that are pretty normal for apps in that range, at least that is the impression&#x000A;I got from talking to some fellow developers.</p>&#x000A;&#x000A;<h3>After</h3>&#x000A;&#x000A;<p>Here are the first 30 days after after the switch:</p>&#x000A;&#x000A;<ul>&#x000A;<li>217 paid sales</li>&#x000A;<li>6261 downloads</li>&#x000A;<li>1110 EUR revenue</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<p><a href="/images/content/ioctocat_after_freemium.png"><img src="/images/content/ioctocat_after_freemium.png" alt="iOctocat paid sales after the freemium switch" /></a></p>&#x000A;&#x000A;<p><a href="/images/content/ioctocat_after_freemium_downloads.png"><img src="/images/content/ioctocat_after_freemium_downloads.png" alt="iOctocat paid sales after the freemium switch" /></a></p>&#x000A;&#x000A;<p>The first chart shows the number of paid sales, the second one the number of downloads. On freemium&#x000A;launch day the app got 2009 downloads and went hockey stick from there - unfortunately in the&#x000A;<a href="http://onstartups.com/Portals/150/images//OnStartups-Hockey-Stick-cartoon.jpg">wrong direction</a> ;)</p>&#x000A;&#x000A;<p>However, it still has about 100 downloads per day, which shows that there is a bigger market than the app was&#x000A;reaching before. Nevertheless the 10x growth in download numbers did not result in more sales yet - the&#x000A;conversion rate of the first 30 days is ~3.5%. Of course you cannot expect people that download the app just&#x000A;to try it to buy the pro version immediately, even if they think the app is useful to them. That is why I think&#x000A;of this switch as some kind of long-term investment.</p>&#x000A;&#x000A;<h3>Improving conversions</h3>&#x000A;&#x000A;<p>Right now the app now is missing out on what would have been potential customers before: People who just use&#x000A;public repositories and do not need any of the pro features do not have to pay anymore which might be&#x000A;<a href="https://twitter.com/tvdeyen/status/410907972009996288">crazy indeed</a>. This is the point I thought about most&#x000A;when I tried to come up with a good pricing model. I could have charged a low amount for public repository&#x000A;access, but I decided that this approach would have more cons than pros&#8230;</p>&#x000A;&#x000A;<p><strong> Pros </strong></p>&#x000A;&#x000A;<ul>&#x000A;<li>I think the app is definitely valuable to people even if they are using it in an open source context.</li>&#x000A;<li>This would have also prevented some frustrating one star reviews that seem to be unavoidable when you&#x000A;are offering stuff for free: There will always be someone who does not appreciate your work or&#x000A;just likes to rant in App Store reviews.</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<p><strong> Cons </strong></p>&#x000A;&#x000A;<ul>&#x000A;<li>Even if I would have charged only 79 cents I do not think the app would have gotten a fifth of the downloads&#x000A;it got the free way. You just cannot beat the magic price tag &#8220;free&#8221; and giving people a no brainer opportunity&#x000A;to try the app outweighs the income of some potential sales in this case <em>imho</em>.</li>&#x000A;<li>I personally prefer to pay for an app upfront and get full access immediately, maybe that is why the model of&#x000A;letting customers pay twice (once for basic access, then again for the pro features) just does not seem right&#x000A;to me.</li>&#x000A;<li>With a userbase of people who are developers themselves, I know that at least some users are buying the pro&#x000A;upgrade even if they do not need the addtional features. This might sound romantic, but sometimes I get feedback&#x000A;from customers who know that their &#8220;donation&#8221; helps to&#x000A;<a href="https://twitter.com/dvdln/status/398847329006276608">ensure the future development</a> of the app &lt;3</li>&#x000A;<li>As I mentioned before I just like the way this fits with GitHubs pricing.</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<p>However, I am still thinking about how to make an upgrade more desirable for heavy users of the free version.&#x000A;The features it offers without paying go far beyond a demo version and even though I do not really like to&#x000A;artificially limit the functionality I might cut off some features worth paying for, so that the app does not&#x000A;miss out on too many people who would also be willing to pay for what they get - especially with the things in&#x000A;mind I still want to tackle, like the iPad interface.</p>&#x000A;&#x000A;<p>One more point I will definitely change: Right now the app is not really trying to upsell anyone. Once you&#x000A;added your account you do not get to see any possibility to upgrade, besides a shy little button on the&#x000A;repository lists. The only place I advertise it prominently is the accounts list, but users of the free version&#x000A;rarely return to that, because they can only have a single account. That was an oversight on my part or maybe&#x000A;just me being naive&#8230;</p>&#x000A;&#x000A;<h3>Conclusion</h3>&#x000A;&#x000A;<p>Unfortunately changing the pricing model did not turn out to be a quick win for iOctocat, but as I said I consider&#x000A;the move to freemium as a long-term investment and already have some ideas on how to improve the current situation.&#x000A;I am curious to see what kind of results the upcoming months will yield, but I do not think I will switch back to&#x000A;an upfront payment model whatever happens, because of the reasons I outlined in the introduction of this article.</p>&#x000A;&#x000A;<p>From a users perspective I can totally see the benefit of the freemium model and with more and more apps&#x000A;on the App Store taking this route I can imagine the rate of people that are willing to pay upfront go down.&#x000A;Nevertheless I might consider cutting off some more features from the free version to give more non-pro users&#x000A;a reason to upgrade. I would not really like to do this and I can imagine some push back from users of the free&#x000A;version, but I still want to work on the app and improve it - and making some more revenue would give me better&#x000A;options to do just that.</p>&#x000A;&#x000A;<h6>Last but not least&#8230;</h6>&#x000A;&#x000A;<p><em>* Technical sidenote:</em> Along with iOS 7 Apple gave developers a new/better way for utilizing App Store receipts&#x000A;(see <a href="https://developer.apple.com/wwdc/videos/">WWDC 2013 Session 308</a>), which makes it possible to implement&#x000A;various ways of demo functionality. iOctocat uses the App Store receipt to check the version the user bought&#x000A;initially so that customers who bought the app prior to the switch do not have to pay again. Likewise one could&#x000A;implement a limited period of time with full access to give the users a trial version (which I might cover in&#x000A;another blog post sometime&#8230;)</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2013-09-15T21:05:00+02:00">&#x000A;        <div class="top">Sep 13</div>&#x000A;        <div class="day">15</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/three-quick-wins-for-responding-to-customer-feedback">Three Quick Wins for Responding to User Feedback</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>Giving users an easy way to submit feedback and talk to the developer about the app should be an essential part&#x000A;of almost every app out there. I am using <a href="http://hockeyapp.net/">HockeyApp</a>&#8217;s feedback feature, which is not only&#x000A;easy to integrate, but also comes with a nice interface and makes leaving comments a seamless experience for the users.</p>&#x000A;&#x000A;<p>Lately I have tried some things when responding to customer feedback and had good success with that, so I wanted to&#x000A;share my experience with you - so here are three tips for what you should try when answering your users feedback.</p>&#x000A;&#x000A;<h3>Ask for a review</h3>&#x000A;&#x000A;<p>You might not want to do that in case the user is not satisfied with your app and is contacting you about problems&#x000A;she or he is experiencing. But other than that this is a very good chance to get a user to leave a review on the&#x000A;App Store: Just be kind and ask them for a short, one or two sentence long review. Oftentimes the positive feedback&#x000A;you get is ready to be recycled as an App Store review, so provide the user with a quick link to access your apps&#x000A;store page and you will increase your review count in no time.</p>&#x000A;&#x000A;<h3>Point them to your mailinglist/social media outlets</h3>&#x000A;&#x000A;<p>Oftentimes when people ask for a feature that is already planned or I may be working on already, I propose they&#x000A;subscribe to the mailinglist or follow the apps twitter/app.net account. This assumes that you are using these&#x000A;outlets to frequently talk about upcoming versions, stuff that is in the making or share other information that&#x000A;might be useful for your users. As taking action is just one or two clicks away this converts pretty well and&#x000A;lets your users stay in the loop.</p>&#x000A;&#x000A;<h3>Use a footer/signature</h3>&#x000A;&#x000A;<p>Depending on the type of feedback or request I get, I sometimes use the opportunity to point to my personal website&#x000A;or other/similar projects. The success of this is not easy to measure unless the users might let you know&#x000A;afterwards that they found the information they were looking for. Nevertheless, having a signature containing one or&#x000A;two links at the end of an email is an unobtrusive hint that might spark interest.</p>&#x000A;&#x000A;<h3>Bonus tip: Be quick</h3>&#x000A;&#x000A;<p>Sometimes people are surprised to actually get an answer to their feedback (which happens more often than I expected).&#x000A;I do not only answer every request I get, but also try to do it as fast as I can. It is amazing to see how even&#x000A;disgruntled or angry users change their minds when they are taken care of as quickly as possible. A quick answer&#x000A;also sets a good ground for the other tips mentioned.</p>&#x000A;&#x000A;<hr />&#x000A;&#x000A;<p>All these tips take into account that the people who contact you seem to care about your app: They are loyal (and&#x000A;hopefully satisfied) users that take the time to let you know what they think and want to help you improve your&#x000A;app. I have found that those users react very positively to these pointers and some are even thankful for you letting&#x000A;them know where they can find out more or follow your app more closely - and if that is the case: Congratulations,&#x000A;you are on the right track with what you are doing.</p>&#x000A;&#x000A;<p>I hope you have similar success when experimenting with these tips - let me know what you think and how your users&#x000A;react.</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2013-08-08T08:00:00+02:00">&#x000A;        <div class="top">Aug 13</div>&#x000A;        <div class="day"> 8</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/ioctocat-github-for-iphone">iOctocat v2 is here</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>Woohoo, today is shipping day! I&#8217;m very proud to announce that version 2 of <strong>iOctocat - GitHub for iPhone</strong>&#x000A;is <a href="http://ioctocat.com/appstore-iphone">now available on the App Store</a> :)</p>&#x000A;&#x000A;<p><a href="http://ioctocat.com">The app</a> started out four years ago and has seen major enhancements during the past year: The versions 1.7 and 1.8&#x000A;brought a lot of improvements (new menu, multiple accounts and GitHub Enterprise support) and even big features&#x000A;like push notifications. Over the past months I&#8217;ve been working diligently on the app, added tons of features and&#x000A;improved the overall performance. Today is the day all that goodness ships and you can tell I&#8217;m really satisfied&#x000A;with what it looks like by the way I&#8217;m talking about it ;)</p>&#x000A;&#x000A;<h3>What&#8217;s new</h3>&#x000A;&#x000A;<p>People have sent very nice feedback over the past months, asking for features and enhancements that I now found the&#x000A;time for to implement. These are some of my favorites from the new release:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Markdown rendering in issues and comments</li>&#x000A;<li>Support for emojis (including autocompletion)</li>&#x000A;<li>Links in event items instead of buttons</li>&#x000A;<li>Pagination for lists</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<p>Many users have asked for better issues integration. This has been on my internal list for a long time and now&#x000A;it is finally available. Here are the major issues additons that will help you to better manage your workflow&#x000A;on the go:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Issue search and filtering</li>&#x000A;<li>Manage labels, milestones, and assignees for issues and pull requests</li>&#x000A;<li>Drafts for issues, milestones and comments</li>&#x000A;<li>Copy, edit and delete comments</li>&#x000A;<li>Display issue/pull request events (i.e. closed, merged) alongside comments</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<p>In addition to that there are also some new niceties that have been missing before:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Search with options for sorting and language</li>&#x000A;<li>Fullscreen in file- and webview</li>&#x000A;<li>Fork a repository</li>&#x000A;<li>Performance improvements for table views with cells with dynamic height</li>&#x000A;<li>Massive improvements for viewing files in commits and pull requests</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<h3>What&#8217;s next</h3>&#x000A;&#x000A;<p>I laid out my plans for the next versions in detail in a <a href="/blog/ioctocat-github-for-ios">previous blog post</a>,&#x000A;here is the <em>TL;DR</em> for the upcoming months:</p>&#x000A;&#x000A;<ul>&#x000A;<li><strong>v2.0.1</strong> - Bugfixes (as there definitely will be rough edges I&#8217;ve overseen)</li>&#x000A;<li><strong>v2.1.0</strong> - All about iOS 7 (and it will require the new OS version)</li>&#x000A;<li><strong>v2.1.x</strong> - New features like commenting on lines of pull request diffs and repository discovery functions via the new GitHub search API (much asked for)</li>&#x000A;<li><strong>v2.2.0</strong> - iPad UI: Separate app with a new UI for the iPad</li>&#x000A;</ul>&#x000A;&#x000A;&#x000A;<h3>That&#8217;s it</h3>&#x000A;&#x000A;<p>Head over to the App Store and <a href="http://ioctocat.com/appstore-iphone">get iOctocat v2 now</a>.&#x000A;If you find the time, please write a review and tell your friends, that helps a lot! And in case you got feedback: Just let me know,&#x000A;I&#8217;m here to listen and willing to improve the upcoming versions responding to your needs!</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2013-07-10T15:45:00+02:00">&#x000A;        <div class="top">Jul 13</div>&#x000A;        <div class="day">10</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/ioctocat-github-for-ios">iOctocat: GitHub for iPhone</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>I am currently working on <a href="http://ioctocat.com">iOctocat v2.0</a> and because people keep asking, here are&#x000A;thoughts and insights I would like to share about the progress and ideas behind it.</p>&#x000A;&#x000A;<h3>In general</h3>&#x000A;&#x000A;<p>v2 will be <em>a new app</em> and in contrast to the current version 1 <em>it will not be universal</em>, which means&#x000A;separate apps for the iPhone and iPad.</p>&#x000A;&#x000A;<p>Up to now, the iPad version of the app has been neglected and has not gotten the attention it deserves.&#x000A;There have been attempts to create an unique experience which utilizes the surplus of screen real estate,&#x000A;but those have not gotten very far, because I wanted to make the app feature complete before improving the UI.&#x000A;As a result I made v1 universal to please everyone who would like to use the app on the iPad, even though it&#x000A;is just a scaled up version of the iPhone UI. Judging from the reviews and feedback I got, this made half of&#x000A;the user base happy, because they liked having a single app which they paid for once and could use on all their&#x000A;devices. The other half was buying the app because they wanted it to work primarily on their iPad - those users&#x000A;felt like they did not fully get what they wanted and I can totally understand that.</p>&#x000A;&#x000A;<p>To make a long story short: <em>v2.0 will be iPhone only at first</em>, because I still wanted to make it feature&#x000A;complete first. Once that is out on the App Store I will work on v2.1 to make the app ready for iOS 7.&#x000A;This will be a big deal and include some major UI changes I have postponed so far, because I would have to&#x000A;redo the UI with iOS 7 anyways. After that and having done the inevitable UI changes, I want to devote the time&#x000A;and energy to bring you the iPad experience of iOctocat we all have been waiting for.</p>&#x000A;&#x000A;<h3>E.T.A.</h3>&#x000A;&#x000A;<p>My initial plan was to release v2.0 alongside iOS 7 this fall. I have been able to work on the app full time&#x000A;for the past weeks and have made good progress by now, which led to the decision to release it earlier than&#x000A;that. As the app is almost feature complete with what I planned for the new version it does not make too much&#x000A;sense to wait for iOS 7 - in fact it would be counterproductive: Shipping v2.0 would have been too much of a&#x000A;big bang release with lots of new features and a complete overhaul of the UI, which in itself will take me some&#x000A;time to get right - even when focusing on the iPhone only at first.</p>&#x000A;&#x000A;<p>Right now <em>shipping v2.0 in mid August seems realistic</em> and that is what I strive to do.</p>&#x000A;&#x000A;<p>Another good thing about shipping independently from the new OS version is that people that do not want to&#x000A;upgrade to iOS 7 immediately will be able to take advantage of all the features the new app brings.</p>&#x000A;&#x000A;<p>There will be time to fix bugs and maybe add one or two more features before shipping <em>v2.1, which will target iOS 7&#x000A;and leave behind support for iOS 6</em> and below. That is because the UI changes iOS 7 brings are so drastic that I&#x000A;will not be able and do not want to maintain two separate versions of the UI.</p>&#x000A;&#x000A;<h3>Pricing</h3>&#x000A;&#x000A;<p>As with v1, I need to <a href="/blog/app-store-pricing">finance working on the app</a> - even more so now that I have already&#x000A;dedicated several weeks of full time work to hack on the new version.</p>&#x000A;&#x000A;<p>The <em>iPhone version will be $9.99</em> (8.99 EUR). I have not decided on a price point for the iPad version yet, but I&#x000A;think it will be a little more than that and I want to justify this by delivering a very good experience on the iPad.</p>&#x000A;&#x000A;<p>Two weeks ago when I decided to ship v2.0 around mid August I cut the price of v1 in half - it is currently&#x000A;<a href="http://ioctocat.com/appstore-iphone">available on the App Store for $4.99</a>. This makes six weeks of transitioning period&#x000A;and I did this to be fair to everyone buying the app from then on. I was hoping for Apple to announce paid upgrades&#x000A;at WWDC 2013, but it seems unlikely that we will see something like that in the near future. Having paid upgrades&#x000A;would have been my favorite option, but as this will not happen I think doing it this way seems like the best option,&#x000A;because I do not think there will be an introductory price for v2.0 and I simply cannot grant existing customers a&#x000A;discount.</p>&#x000A;&#x000A;<h3>The road so far and on</h3>&#x000A;&#x000A;<p>I really enjoy what I am doing right now: Hacking on an app I myself need and enjoy using, contributing to open&#x000A;source <a href="https://github.com/mattt/TTTAttributedLabel/pull/243">along</a> <a href="https://github.com/RSully/RSColorPicker/pull/25">the</a>&#x000A;<a href="https://github.com/seattlerb/vlad/pull/53">way</a>, and talking to other developers that live the indy life.&#x000A;I am very grateful for the past weeks and fell in love with being able to work on what I think is best - and deciding&#x000A;what to do and deliver value whenever I open my MacBook or talk to customers.</p>&#x000A;&#x000A;<p>Having said that, I hope you will enjoy v2 as much as I already did - <strong>WIN WIN</strong>.</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2013-05-09T10:16:00+02:00">&#x000A;        <div class="top">May 13</div>&#x000A;        <div class="day"> 9</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/app-store-pricing">App Store Pricing</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>Kicked off by a great series written by Michael Jurewitz (links below) a new discussion about pricing on the App Store has been spawned. Here&#8217;s my take on it, along with a few experiences.</p>&#x000A;&#x000A;<p><strong>TL;DR</strong> If you have an app on the App Store, do yourself and your fellow devs a favor, pause reading now, go to iTunes Connect and raise the price of your app(s) to what you honestly feel you deserve.</p>&#x000A;&#x000A;<p>I assume there is room for improvement and that you can raise the price, because when you initially set the price you most likely fell into the trap of not being couragous enough to charge what it might be worth. Go for it – in case you are hesitant, just make it an experiment for the next two weeks. I did the same half a year ago, and I&#8217;m writing this to encourage you. Here are my findings&#8230;</p>&#x000A;&#x000A;<h3>A little bit of background&#8230;</h3>&#x000A;&#x000A;<p>All the experiences I&#8217;m talking about are based on what happened to <a href="http://ioctocat.com">iOctocat - GitHub for iOS</a> within the last six months. Up to then it&#8217;s been a part time project of mine, which started four years ago and got developed further whenever I found the time and energy in my spare time. When the iPhone 5 came out I made the decision to either put it aside or develop it on a more serious basis, because the state back then was unsatisfying for both parties, customers and me: Important features were lacking and bugs took a long time to get fixed, because when you are a father of two, you got some more important things to do on your evenings and weekends.</p>&#x000A;&#x000A;<p>Up to then the price was $4 (which was already <em>high</em> compared to the race-to-the-bottom prices we see all over the App Store) and I the income I made from that was far from covering the costs of development and support - and to be honest, somewhere along the way the cost of development neared zero, because I was just lacking the motivation to put more time into it.</p>&#x000A;&#x000A;<p>So I decided to raise the price to around $10 (I experimented with variations over a couple of weeks) and see what happens: In case it takes off and I can make at least some more money off of it, I&#8217;ll start investing my time again - if not, I&#8217;ll let it sink, because there does not seem to be a market that allows sustainable development of that kind of thing anyway.</p>&#x000A;&#x000A;<p>I personally did not really expect what happend, but having read so far, you might already guess the direction it went in&#8230;</p>&#x000A;&#x000A;<h3>More income</h3>&#x000A;&#x000A;<p>The amount of units sold stayed nearly the same, at first they dropped off a little – but that does not matter, because even if you double your price and only sell half the amount, you are winning: At least in theory there should be less costs for support and you validated that there still is a market for that kind of product in a higher price range. Of course this depends on the actual units sold, but you get the idea&#8230;</p>&#x000A;&#x000A;<p>Then, after a while the sales started to increase. Not like they went through the roof, but the numbers improved. Don&#8217;t get me wrong: I&#8217;m not talking about wanting to become rich from the app (and even if I would, I&#8217;d be still far from it) - my point is that I wanted to find a price point that allows to develop/run/maintain the app on a sustainable basis, which you just cannot do for 89 cents as an independent developer.</p>&#x000A;&#x000A;<p>iOctocat - just like most other apps - is an app with a one time fee: You pay it once and get all the updates for free. I thought about introducing other models while working on support for push notifications (that just landed btw), but I decided to keep everything as it is, because at that price point I can offer the additional services without charging an extra amount for push, which would have felt somewhat strange anyways.</p>&#x000A;&#x000A;<p>Now I cover the costs by charging what I think the app is worth, which gives me the chance to also reinvest the money for things that will improve the customers experience, like services as <a href="http://hockeyapp.net/">HockeyApp</a>, development apps like <a href="http://www.deploymateapp.com/">Deploymate</a> or even giving back to people who contribute on GitHub - <em>win win</em>.</p>&#x000A;&#x000A;<h3>More loyal users</h3>&#x000A;&#x000A;<p>Besides the increased value on my side, it also feels like the customers value it more. Of course the perceived value automatically increases when you pay more for something, but first and foremost I am talking about that the customers tend to feel more involved in the app. I don&#8217;t think that iOctocat being open source makes it a special case, but now I even get sales and reviews that are like &#8220;Wanted to support the project, cheers!&#8221; (actual review from the App Store).</p>&#x000A;&#x000A;<p>The feedback and reviews I get really improved when I increased the price. One factor for that seems to be that the higher price sieves out the people that spontaneously bought it and then were annoyed, that it does not also offer a code editor and the whole file management via Git.</p>&#x000A;&#x000A;<p>Instead, customers seem to take the time to see whether or not it fits their needs and reach out to me via <a href="http://twitter.com/ioctocat">Twitter</a> or <a href="https://alpha.app.net/ioctocat">ADN</a> to ask if it supports what they expect. This way I have more contact to (potential) customers and can directly react to feedback and questions. I could go into a seperate discussion about how the current state of the App Store not allowing to answer reviews or offering trials does otherwise make this a problem in the first place, but that&#8217;s another topic.</p>&#x000A;&#x000A;<p>The customers also feel like they have a say - and of course they do. I try to respond as best as I can to feature requests, issues and feedback I get, which brings me to my last point&#8230;</p>&#x000A;&#x000A;<h3>More motivation</h3>&#x000A;&#x000A;<p>Now that I can at least justify putting my spare time into the app, I really enjoy it again. I guess a look at the <a href="https://github.com/dennisreimann/ioctocat/contributors">contributions chart on GitHub</a> says it best&#8230;</p>&#x000A;&#x000A;<p><img src="/images/content/ioctocat_contributions_2013.png" alt="iOctocat GitHub Contributions" /></p>&#x000A;&#x000A;<p>There is a lot more coming and I&#8217;m really looking forward to dedicate at least one month of full time work to iOctocat this summer. The list of things I want to add and improve is still long - and hacking on the project is fun again.</p>&#x000A;&#x000A;<h3>So were do we go from here?</h3>&#x000A;&#x000A;<p>Well, we cannot sit and wait for Apple (or even expect them) to fix the pricing on the App Store. That ship has sailed and somehow we developers need to educate users and customers that running an app needs a sustainable basis that just cannot be achieved by charging 89 cents. And it already has begun, see the list of selected posts on that topic below, that were prior to this one.</p>&#x000A;&#x000A;<p>At least from my experience people like to hand you their money if you make their life easier or more fun. This makes for a great conclusion too: Please don&#8217;t choose to compete on price, make quality and dedication to your product the main differentiator - your customers and fellow devs will thank you.</p>&#x000A;&#x000A;<h3>Further reading</h3>&#x000A;&#x000A;<ul>&#x000A;<li><a href="http://jury.me/blog/">Michael Jurewitz&#8217; blog</a> with the series of articles</li>&#x000A;<li>Dave Addey: <a href="http://daveaddey.com/?p=1084">Apps are too cheap</a></li>&#x000A;<li>MacWorld: <a href="http://www.macworld.com/article/2032847/a-5-app-isnt-expensive-customers-need-to-help-fix-the-app-store-economy.html">A $5 app isn&#8217;t expensive</a></li>&#x000A;<li>Kevin Hoctor: <a href="http://kevinhoctor.blogspot.de/2013/03/the-future-of-software-pricing.html">The Future of Software Pricing</a></li>&#x000A;</ul>&#x000A;&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2012-12-03T10:30:00+01:00">&#x000A;        <div class="top">Dec 12</div>&#x000A;        <div class="day"> 3</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/uitextview-height-in-uitableviewcell">UITableViewCell height with UITextView</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>You will find lots of resources on the internet about calculating the height of a UITableViewCell based&#x000A;on an inner UITextView. Most of what I&#8217;ve found when I was trying to find a solution was either incomplete&#x000A;or wrong. Here are my learnings and the approach I&#8217;m taking to tame what gave me headaches for some time now.</p>&#x000A;&#x000A;<h3>Prerequisites</h3>&#x000A;&#x000A;<p>I wanted this to work for <em>both table view styles</em> within <em>universal apps</em> that support <em>autorotation</em>.&#x000A;The solution should also be flexible enough to allow for subclassing and configuration of the custom&#x000A;table view cell so that I can reuse the code for different kinds of cells.</p>&#x000A;&#x000A;<h4>UITableViewCell</h4>&#x000A;&#x000A;<p>To calculate the height of the cell (most likely to be used in <code>tableView: heightForRowAtIndexPath:</code>) you&#x000A;have to know its width so that you can calculate the size of the UITextView with the method&#x000A;<code>sizeWithFont:forWidth: lineBreakMode:</code> provided by the NSString class. That is because the naive approach&#x000A;of adding the cell to the table view and asking for the frame size of the text view does not work -&#x000A;<code>tableView:heightForRowAtIndexPath:</code> gets called before <code>tableView:cellForRowAtIndexPath:</code> so that you have&#x000A;to do the calculation on your own.</p>&#x000A;&#x000A;<h4>UITextView</h4>&#x000A;&#x000A;<p>First of all we have to notice that an UITextView has an inset of 8px on each side. I have not found&#x000A;official documetation about this and event though its <code>contentInset</code> property is set to <code>UIEdgeInsetZero</code>&#x000A;by default, it has this 16px horizontal padding we have to subtract when calculating with the text views width.</p>&#x000A;&#x000A;<p><strong>Note:</strong> On StackOverflow and elsewhere you can find remarks about reduzing the padding by applying a custom&#x000A;inset with negative values, like this:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="n">textView</span><span class="p">.</span><span class="n">contentInset</span> <span class="o">=</span> <span class="n">UIEdgeInsetsMake</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>This indeed unsets the visual padding, but from what I have seen and tested it does not make the text run wider&#x000A;- you still have to subtract the 16px. With this example the text just seems to start 8px more to the left,&#x000A;but still wraps at the original width.</p>&#x000A;&#x000A;<h3>The approach</h3>&#x000A;&#x000A;<p>There is one thing I don&#8217;t really like about the solution I&#8217;ve found and that is passing in the table view&#x000A;to the method <code>- (CGFloat)heightForTableView:(UITableView *)tableView</code> that does the calculation. However&#x000A;I did not find a way to avoid this, because we need the width of the cells outer frame, because it will give&#x000A;us a way to get to the cells width - this way it works with autorotation and cell reuse.</p>&#x000A;&#x000A;<p>The code for the custom UITableViewCell subclass (<code>TextCell</code>) looks like this:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="k">@implementation</span> <span class="nc">TextCell</span>&#x000A;&#x000A;<span class="c1">// UITextView has an inset of 8px on each side</span>&#x000A;<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">textInset</span> <span class="p">{</span>&#x000A;    <span class="k">return</span> <span class="mf">8.0f</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="c1">// Sets the text and adjusts the frame height</span>&#x000A;<span class="c1">// so that the text view does not scroll</span>&#x000A;<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setContentText:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">theText</span> <span class="p">{</span>&#x000A;    <span class="n">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">theText</span><span class="p">;</span>&#x000A;    <span class="n">CGRect</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">frame</span><span class="p">;</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">cHeight</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">contentSize</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>&#x000A;    <span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">cHeight</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">textInset</span><span class="p">;</span>&#x000A;    <span class="n">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="c1">// Calculates the text views width by subtracting</span>&#x000A;<span class="c1">// the horizontal insets and margins</span>&#x000A;<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">textWidthForOuterWidth:</span><span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nv">outerWidth</span> <span class="p">{</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">textInset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textInset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">marginH</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">marginLeft</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">marginRight</span><span class="p">;</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">width</span> <span class="o">=</span> <span class="n">outerWidth</span> <span class="o">-</span> <span class="n">marginH</span><span class="p">;</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">textWidth</span> <span class="o">=</span> <span class="n">width</span> <span class="o">-</span> <span class="n">textInset</span><span class="p">;</span>&#x000A;    <span class="k">return</span> <span class="n">textWidth</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">heightForTableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="p">{</span>&#x000A;    <span class="c1">// calculate the outer width of the cell</span>&#x000A;    <span class="c1">// based on the tableView style</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">outerWidth</span> <span class="o">=</span> <span class="n">tableView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="n">tableView</span><span class="p">.</span><span class="n">style</span> <span class="o">==</span> <span class="n">UITableViewStyleGrouped</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="c1">// the grouped table inset is 20px on</span>&#x000A;        <span class="c1">// the iPhone and 90px on the iPad</span>&#x000A;        <span class="kt">BOOL</span> <span class="n">iPad</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIDevice</span> <span class="n">currentDevice</span><span class="p">].</span><span class="n">userInterfaceIdiom</span> <span class="o">==</span>&#x000A;          <span class="n">UIUserInterfaceIdiomPhone</span><span class="p">;</span>&#x000A;        <span class="n">outerWidth</span> <span class="o">-=</span> <span class="n">iPad</span> <span class="o">?</span> <span class="mf">20.0f</span> <span class="o">:</span> <span class="mf">90.0f</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">textInset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textInset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">marginV</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">marginTop</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">marginBottom</span><span class="p">;</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">textWidth</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="n">textWidthForOuterWidth</span><span class="o">:</span><span class="n">outerWidth</span><span class="p">];</span>&#x000A;    <span class="c1">// use large value to avoid scrolling</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">maxHeight</span> <span class="o">=</span> <span class="mf">50000.0f</span><span class="p">;</span>&#x000A;    <span class="n">CGSize</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="n">textWidth</span><span class="p">,</span> <span class="n">maxHeight</span><span class="p">);</span>&#x000A;    <span class="n">CGSize</span> <span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">text</span>&#x000A;        <span class="nl">sizeWithFont:</span><span class="n">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">font</span>&#x000A;        <span class="nl">constrainedToSize:</span><span class="n">constraint</span>&#x000A;        <span class="nl">lineBreakMode:</span><span class="n">UILineBreakModeWordWrap</span><span class="p">];</span>&#x000A;    <span class="n">CGFloat</span> <span class="n">height</span> <span class="o">=</span> <span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">+</span> <span class="n">textInset</span> <span class="o">+</span> <span class="n">marginV</span><span class="p">;</span>&#x000A;    <span class="k">return</span> <span class="n">height</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="k">@end</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>You may have noticed, that the code above refers to getters for the margin. I use these&#x000A;to configure the coordinates that text views in different kinds of <code>TextCell</code> subclasses&#x000A;may have.</p>&#x000A;&#x000A;<p><img src="/images/content/uitextview-interface_builder.png" alt="Cellconfiguration in Interface Builder" /></p>&#x000A;&#x000A;<p>For example I would use these settings in a concrete subclass when the UITextView&#x000A;in Interface Builder is set like in the screenshot above.</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">marginTop</span> <span class="p">{</span>&#x000A;    <span class="k">return</span> <span class="mf">65.0f</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">marginBottom</span> <span class="p">{</span>&#x000A;    <span class="k">return</span> <span class="mf">40.0f</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">marginLeft</span> <span class="p">{</span>&#x000A;    <span class="k">return</span> <span class="mf">1.0f</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">marginRight</span> <span class="p">{</span>&#x000A;    <span class="k">return</span> <span class="mf">1.0f</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>The code and examples for this are taken from the <a href="https://github.com/dennisreimann/ioctocat/blob/8e5544b109fb6221eaf01ce25651df76ca5cf5f1/Classes/TextCell.m">iOctocat codebase</a>.</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2012-09-06T17:07:00+02:00">&#x000A;        <div class="top">Sep 12</div>&#x000A;        <div class="day"> 6</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/rails-hosting-auf-uberspace">Rails-Hosting auf Uberspace</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p><img src="/images/content/uberspace.png" alt="Uberspace - Hosting on Asteroids" />&#x000A;Ich bin großer Fan der einladenden Atmosphäre, Einfachheit und dem großartigen Support auf&#x000A;<a href="https://uberspace.de">Uberspace</a>. Konsequenterweise hab ich nun auch meine letzten privaten&#x000A;Projekte dorthin umgezogen und mich dabei auch mit dem Rails-Deployment auf Uberspace&#x000A;auseinander gesetzt.</p>&#x000A;&#x000A;<p>Für die ersten Schritte findet man im Wiki eine Anleitung mit allen generellen Einzelheiten zum&#x000A;<a href="http://uberspace.de/dokuwiki/cool:rails">Aufsetzen einer Rails-Anwendung auf Uberspace</a>. Der&#x000A;dort beschriebene Ansatz setzt der Einfachheit halber auf das manuelle Ausführen der einzelnen&#x000A;Schritte und das Ausliefern der Anwendung über FastCGI. Da das nicht unbedingt etwas ist, was&#x000A;man aus dem täglichen Rails-Kontext kennt, hier ein paar Hinweise und Learnings zur Automatisierung&#x000A;des Deployments und zur Verwendung alternativer Applikationsserver.</p>&#x000A;&#x000A;<h3>Automatisierung des Deployments</h3>&#x000A;&#x000A;<p>Wer seine Anwendungen mit Capistrano deployed, sollte einen Blick auf <a href="https://github.com/yeah/uberspacify">uberspacify</a>&#x000A;werfen, ein Gem das alle nötigen Capistrano-Scripte mitbringt, um den eigenen Uberspace startklar&#x000A;für das Rails-Hosting zu machen. Als Fan von <a href="/blog/deployment-with-vlad/">Vlad</a> habe ich mich von&#x000A;uberspacify inspirieren lassen und die nötigen <a href="https://github.com/dennisreimann/vlad-extras/blob/master/lib/vlad/uberspace.rb">Uberspace-Tasks für Vlad</a>&#x000A;geschrieben. Das Script enthält die wichtigsten Anmerkungen und Konfigurationshinweise, hier noch ein&#x000A;paar generelle Dinge:</p>&#x000A;&#x000A;<p>Die von Vlad/Capistrano benutzte Shell ist nicht die interaktive Shell, die man selbst beim&#x000A;Login über SSH bekommt. Um sicherzustellen, dass auch diese Tools die gleiche Konfiguration (bspw. den&#x000A;Pfad zu einer angepassten Ruby-Version) haben, sollten die <a href="http://uberspace.de/dokuwiki/cool:rails#ruby_aktivieren">Anweisungen dafür</a>&#x000A;in die <code>.bashrc</code> statt in die <code>.bash_profile</code> geschrieben werden.</p>&#x000A;&#x000A;<p>Die Anwendung selbst muss unterhalb <code>/var/www/virtual/username/</code> liegen, damit der Apache darauf&#x000A;zugreifen kann. Im einfachsten Fall würde man einfach in das <code>html</code>-Verzeichnis dort deployen, was aber&#x000A;mit der von den Deployment-Tools generierten Struktur (<code>current</code>, <code>releases</code>, <code>shared</code>) ungünstig ist,&#x000A;da diese dann im <code>DocumentRoot</code> des Webservers liegen. Ich mache es daher so, die Anwendung in&#x000A;<code>/var/www/virtual/username/rails/myapp</code> zu deployen und einen <a href="http://uberspace.de/dokuwiki/start:domain#in_sachen_webserver">Symlink mit dem Hostnamen der Domain</a>&#x000A;auf das darin liegende <code>current/public</code> zu setzen. Damit funktioniert dann auch der Zugriff aus die Assets&#x000A;der Anwendung problemlos, ohne weitere Einstellungen in der <code>.htaccess</code> machen zu müssen. Im Zusammenhang&#x000A;mit den so verwendeten Domains sollte man den <a href="http://uberspace.de/dokuwiki/start:domain#achtung_bei_rewriterules">Hinweis zum angepassten DocumentRoot</a>&#x000A;beachten.</p>&#x000A;&#x000A;<h3>Alternative Applikationsserver</h3>&#x000A;&#x000A;<p>Statt FastCGI benutze ich Thin, generell treffen die nachfolgenden Dinge aber auch zu, sollte man sich&#x000A;für die Verwendung von Unicorn, Puma, Mongrel oder Passenger Standalone entscheiden. Wichtig ist eigentlich&#x000A;nur, dass man den Applikationsserver auf hohen Port laufen lässt und ihn <a href="http://uberspace.de/dokuwiki/system:daemontools">mittels Daemontools überwacht</a>,&#x000A;so dass er auch unabhängig von Webserver-Restarts persistent läuft.</p>&#x000A;&#x000A;<p>Das <code>run</code>-Script dafür, sieht dann beispielsweise folgendermaßen aus:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="c">#!/bin/bash</span>&#x000A;<span class="nb">export </span><span class="nv">HOME</span><span class="o">=</span>/home/username&#x000A;<span class="nb">source</span> <span class="nv">$HOME</span>/.bash_profile&#x000A;<span class="nb">cd</span> /var/www/virtual/username/rails/myapp/current&#x000A;<span class="nb">exec</span> /home/username/.gem/ruby/1.9.1/bin/bundle <span class="nb">exec </span>thin start -p 43862 -e production 2&gt;&amp;1&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>Zu guter letzt benötigt man unter <code>current/public</code> noch eine <code>.htaccess</code>-Datei, die eine RewriteRule&#x000A;enthält, um die Requests an den Applikationsserver-Proxy weiterzuleiten. Im einfachsten Fall reicht&#x000A;folgendes:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="nb">RewriteEngine</span> <span class="k">On</span>&#x000A;<span class="nb">RewriteBase</span> /&#x000A;<span class="nb">RewriteCond</span> %{REQUEST_FILENAME} !-f&#x000A;<span class="nb">RewriteRule</span> ^(.*)$ http://localhost:43862/$1 [P]&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>Darüber hinaus gibt es hier auch noch eine Variante der <a href="https://gist.github.com/3656874"><code>.htaccess</code> mit Asset-Caching und Wartungsmodus</a>.</p>&#x000A;&#x000A;<p>Sowohl uberspacify als auch das Vlad-Script kümmern sich darum diese Dateien entsprechend der&#x000A;gegebenen Konfiguration zu generieren. Sollte jemand das Vlad-Script ausprobieren oder Anmerkungen&#x000A;zu den hier gegebenen Tipps haben freue ich mich natürlich über Feedback dazu :)</p>&#x000A;&#x000A;<h3>Bitte beachten!</h3>&#x000A;&#x000A;<p>Uberspace hat ein SSH-Connection Limit, was auch gut so ist. Vlad wiederum öffnet für jedes Kommando&#x000A;eine neue SSH-Verbindung, so dass man schnell mit dem Connection Limit kollidiert. Daher ist es sinnvoll,&#x000A;SSH-Multiplexing zu aktivieren, was man mit folgenden Zeilen in der <code>~/.ssh/config</code> tun kann:</p>&#x000A;&#x000A;<div class="highlight"><pre>Host *&#x000A;  ControlMaster auto&#x000A;  ControlPath /tmp/ssh-master-%r@%h:%p&#x000A;  ControlPersist 15m&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>Dies führt dazu, dass bei jedem weiteren Befehl die bereits bestehende SSH-Verbindung genutzt wird.&#x000A;Man hat somit auch gleich ein schnelleres Deployment, daher wird auch in der <a href="http://hitsquad.rubyforge.org/vlad/doco/faq_txt.html">Vlad FAQ</a>&#x000A;generell dazu geraten, SSH-Multiplexing zu verwenden.</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2012-06-29T16:28:00+02:00">&#x000A;        <div class="top">Jun 12</div>&#x000A;        <div class="day">29</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/ploppcasts">Ploppcasts</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p><img src="/images/content/ploppcasts.png" alt="Ploppcasts" />&#x000A;Zusammen mit den Hamburger Kollegen <a href="https://twitter.com/rubiii">Daniel Harrington</a>,&#x000A;<a href="https://twitter.com/halfbyte">Jan Krutisch</a> und <a href="https://twitter.com/phoet">Peter Schröder</a>&#x000A;sitze ich nun ein bis zweiwöchentlich Donnerstag abends virtuell beisammen,&#x000A;um <a href="http://ploppcasts.com">Ploppcasts</a> aufzunehmen: Unser Beitrag zu deutschsprachigem Podcasting&#x000A;mit Themenschwerpunkt rund um alles was mit Ruby, Rails, Webentwicklung und Freelancertum&#x000A;zu tun hat. Zu finden ist das Resultat dann in <a href="http://itunes.apple.com/de/podcast/ploppcasts/id540729185">iTunes</a>,&#x000A;bzw. lässt sich auch mit jeden anderen Feedreader <a href="http://feeds.feedburner.com/Ploppcasts">abonnieren</a>.&#x000A;Über Feedback und Bewertungen in iTunes freuen wir uns natürlich riesig!</p>&#x000A;&#x000A;<h3>Setup</h3>&#x000A;&#x000A;<p>Da ich auf der Suche nach einem geeigneten Setup zur Aufnahme bis auf einen <a href="http://www.macworld.com/article/1162062/skype_garageband_podcast_tips.html">Post auf MacWorld</a>&#x000A;nur wenig gefunden habe, hier auch noch ein paar Worte zu unserem Setup: Wir treffen uns in&#x000A;Skype zu einem Gruppengespräch und nehmen mit dem <a href="http://www.ecamm.com/mac/callrecorder/">CallRecorder</a>&#x000A;die jeweiligen Tonspuren auf. CallRecorder beinhaltet mehrere Anwendungen, unter anderem auch eine, um&#x000A;die einzelnen Aufnahmen in zwei Tonspuren aufzuteilen: Die eigene und die der anderen Gesprächsteilnehmer.</p>&#x000A;&#x000A;<p>Die Einzelspuren werden dann in GarageBand übernommen und mit einer der Gesamtspuren abgeglichen, so&#x000A;dass alle Teilnehmerspuren am Ende synchron sind. In GarageBand lässt sich auf der Rest eines Podcasts&#x000A;ganz gut produzieren, wie beispielsweise Bilder und Shownotes einpflegen. Wer es richtig rund mag, könnte&#x000A;auch noch endlos abgehen und Versprecher etc. rausschneiden, das ist uns aber ehrlich gesagt zu viel&#x000A;Aufwand und wir hoffen, dass wir uns mit der Zeit was solche Dinge angeht einfach genügend verbessern,&#x000A;um die Ähs und Öhs zu reduzieren ;)</p>&#x000A;&#x000A;<p>Generell ist es ratsam, die Aufnahme mit einem vernünftigen externen Mikrofon zu machen,&#x000A;wie beispielsweise dem <a href="http://www.amazon.de/Samson-Mic-Clip-On-USB-Mikrofon/dp/B001R76D42">Go Mic von Samson</a>.&#x000A;Das interne MacBook Mikrofon geht zwar auch, ist aber eben auch anfälliger für Störgeräusche die&#x000A;durch&#8217;s nebenbei tippen oder das Rauschen der Festplatte entstehen. Absolut wichtig ist es, dass jede der&#x000A;aufnehmenden Parteien Kopfhörer auf haben, ansonsten nimmt die eigene Spur auch das mit auf, was man selbst&#x000A;von den anderen empfängt.</p>&#x000A;&#x000A;<p>Wer sich auskennt, darf uns gerne wissen lassen, wie wir die Aufnahme darüber hinaus noch&#x000A;verbessern könnten!</p>&#x000A;&#x000A;<h3>Danke</h3>&#x000A;&#x000A;<p>Vielen Dank an dieser Stelle auch an <a href="https://soundcloud.com/ploppcasts">SoundCloud</a>, die uns&#x000A;auf ihrer wunderbaren Plattform beherbergen und uns den Speicherplatz sponsorn. Außerdem geht&#x000A;ein dickes Dankeschön an <a href="http://nonuts.de">Benjamin Rabe</a>, der uns das schnieke Logo gefingermalt hat.&#x000A;Wer uns folge möchte, findet und natürlich auch auf <a href="https://twitter.com/ploppcasts">Twitter</a>&#x000A;und <a href="https://www.facebook.com/ploppcasts">Facebook</a>.</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2012-02-11T19:16:00+01:00">&#x000A;        <div class="top">Feb 12</div>&#x000A;        <div class="day">11</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/deployment-with-vlad">Deployment with Vlad</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>When I ask people about how they deploy their Rails apps, most of them answer that they are using good old <a href="http://capify.org">Capistrano</a>. It is the most popular solution because it has been around since almost when people started deploying Rails applications and it works well in most cases. However, if you want to do a lot of custom tasks and need to look under the hood to extend it, Capistrano seems somewhat complicated. At least it did at the time I left it in favor of <a href="http://rubyhitsquad.com/Vlad_the_Deployer.html">Vlad</a> - an <em>imho</em> more intuitive deployment tool.</p>&#x000A;&#x000A;<p>Though one might not like the <a href="http://rubyhitsquad.com/Ruby_Hit_Squad.html">offense against Capistrano</a> that was shown when Vlad was released in 2007, it addresses <a href="http://www.infoq.com/news/2007/08/vlad-the-deployer">some valid points</a> when arguing against needless complexity. But enough of the history, this was almost five years ago, both of the tools have improved, made their way and all I wanted to share is some snippets and insights I got from using Vlad over the last years.</p>&#x000A;&#x000A;<p>The main thing I like abot Vlad is that it is based on Rake, which makes it so easy to learn, understand and extend. If you want to do something custom, all you have to do is to write a Rake task. And as you will want to use them across different projects, you can even bundle them up and distribute them as a gem, like I&#8217;ve done with <a href="https://github.com/dennisreimann/vlad-extras">vlad-extras</a>, a set of extensions for tools like DelayedJob, ThinkingSphinx, Monit, Whenever and so on.</p>&#x000A;&#x000A;<p>Here is what a simple <code>config/deploy.rb</code> file might look like:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="c1"># Custom variables used in the following config</span>&#x000A;<span class="n">set</span> <span class="ss">:application</span><span class="p">,</span> <span class="s2">&quot;appname&quot;</span>&#x000A;&#x000A;<span class="c1"># Required variables</span>&#x000A;<span class="n">set</span> <span class="ss">:domain</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">application</span><span class="si">}</span><span class="s2">.com&quot;</span>&#x000A;<span class="n">set</span> <span class="ss">:deploy_to</span><span class="p">,</span> <span class="s2">&quot;/var/www/</span><span class="si">#{</span><span class="n">application</span><span class="si">}</span><span class="s2">&quot;</span>&#x000A;<span class="n">set</span> <span class="ss">:repository</span><span class="p">,</span> <span class="s2">&quot;git@github.com:myaccount/</span><span class="si">#{</span><span class="n">application</span><span class="si">}</span><span class="s2">.git&quot;</span>&#x000A;&#x000A;<span class="c1"># Optional variables</span>&#x000A;<span class="n">set</span> <span class="ss">:user</span><span class="p">,</span> <span class="s2">&quot;deploy&quot;</span> <span class="c1"># if different from your current login</span>&#x000A;<span class="n">set</span> <span class="ss">:bundle_cmd</span><span class="p">,</span> <span class="s2">&quot;/usr/local/bin/bundle&quot;</span>&#x000A;<span class="n">set</span> <span class="ss">:rake_cmd</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">bundle_cmd</span><span class="si">}</span><span class="s2"> exec rake&quot;</span>&#x000A;<span class="n">set</span> <span class="ss">:revision</span><span class="p">,</span> <span class="s2">&quot;origin/master&quot;</span>&#x000A;&#x000A;<span class="c1"># vlad-extras config</span>&#x000A;<span class="n">set</span> <span class="ss">:copy_shared</span><span class="p">,</span> <span class="p">{</span>&#x000A;  <span class="s1">&#39;config/maintenance.html&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;config/maintenance.html&#39;</span><span class="p">,</span>&#x000A;  <span class="s1">&#39;config/database.yml&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;config/database.yml&#39;</span> <span class="p">}</span>&#x000A;<span class="n">set</span> <span class="ss">:symlinks</span><span class="p">,</span> <span class="p">{</span>&#x000A;  <span class="s1">&#39;assets&#39;</span>              <span class="o">=&gt;</span> <span class="s1">&#39;public/assets&#39;</span><span class="p">,</span>&#x000A;  <span class="s1">&#39;config/database.yml&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;config/database.yml&#39;</span> <span class="p">}</span>&#x000A;<span class="n">set</span> <span class="ss">:deploy_tasks</span><span class="p">,</span> <span class="sx">%w(</span>&#x000A;<span class="sx">  vlad:maintenance:on</span>&#x000A;<span class="sx">  vlad:update</span>&#x000A;<span class="sx">  vlad:symlink</span>&#x000A;<span class="sx">  vlad:bundle:install</span>&#x000A;<span class="sx">  vlad:assets:precompile</span>&#x000A;<span class="sx">  vlad:migrate</span>&#x000A;<span class="sx">  vlad:start_app</span>&#x000A;<span class="sx">  vlad:maintenance:off</span>&#x000A;<span class="sx">  vlad:cleanup)</span>&#x000A;&#x000A;<span class="c1"># Bundler ships with vlad integration you&#39;ll have to require</span>&#x000A;<span class="c1"># in order to use the vlad:bundle tasks</span>&#x000A;<span class="nb">require</span> <span class="s1">&#39;bundler/vlad&#39;</span>&#x000A;&#x000A;<span class="c1"># Require custom vlad tasks or recipes from vlad-extras</span>&#x000A;<span class="nb">require</span> <span class="s1">&#39;vlad/maintenance&#39;</span>&#x000A;&#x000A;<span class="c1"># Some custom tasks, can be included directly in the deploy file</span>&#x000A;<span class="n">namespace</span> <span class="ss">:vlad</span> <span class="k">do</span>&#x000A;  <span class="n">namespace</span> <span class="ss">:custom_script</span> <span class="k">do</span>&#x000A;    <span class="sx">%w(start stop restart)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">task</span><span class="o">|</span>&#x000A;      <span class="n">desc</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">task</span><span class="o">.</span><span class="n">capitalize</span><span class="si">}</span><span class="s2"> the custom script&quot;</span>&#x000A;      <span class="n">remote_task</span> <span class="n">task</span><span class="p">,</span> <span class="ss">:roles</span> <span class="o">=&gt;</span> <span class="ss">:app</span> <span class="k">do</span>&#x000A;        <span class="n">run</span> <span class="s2">&quot;cd </span><span class="si">#{</span><span class="n">current_release</span><span class="si">}</span><span class="s2">; RAILS_ENV=</span><span class="si">#{</span><span class="n">rails_env</span><span class="si">}</span><span class="s2"></span>&#x000A;<span class="s2">          </span><span class="si">#{</span><span class="n">bundle_cmd</span><span class="si">}</span><span class="s2"> exec ruby script/custom </span><span class="si">#{</span><span class="n">task</span><span class="si">}</span><span class="s2">&quot;</span>&#x000A;      <span class="k">end</span>&#x000A;    <span class="k">end</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>Here is an example of how easy it is for instance to add staging support:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="n">task</span> <span class="ss">:staging</span> <span class="k">do</span>&#x000A;  <span class="n">set</span> <span class="ss">:rails_env</span><span class="p">,</span> <span class="s2">&quot;staging&quot;</span>&#x000A;  <span class="n">set</span> <span class="ss">:deploy_to</span><span class="p">,</span> <span class="s2">&quot;/var/www/</span><span class="si">#{</span><span class="n">application</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">rails_env</span><span class="si">}</span><span class="s2">&quot;</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;<span class="n">task</span> <span class="ss">:production</span> <span class="k">do</span>&#x000A;  <span class="n">set</span> <span class="ss">:rails_env</span><span class="p">,</span> <span class="s2">&quot;production&quot;</span>&#x000A;  <span class="n">set</span> <span class="ss">:deploy_to</span><span class="p">,</span> <span class="s2">&quot;/var/www/</span><span class="si">#{</span><span class="n">application</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">rails_env</span><span class="si">}</span><span class="s2">&quot;</span>&#x000A;<span class="k">end</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>All you need to do is to change some variables based on the environment that is set with a simple Rake task. You&#8217;d invoke it by running</p>&#x000A;&#x000A;<pre><code>$ bundle exec rake staging vlad:deploy&#x000A;</code></pre>&#x000A;&#x000A;<h3>Gemfile</h3>&#x000A;&#x000A;<p>You can include Vlad and it&#8217;s requirements in the development group, because it you do not need it in any other environment. Requiring is done in the <code>Rakefile</code> like shown below.</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="n">group</span> <span class="ss">:development</span> <span class="k">do</span>&#x000A;  <span class="c1"># Deployment</span>&#x000A;  <span class="n">gem</span> <span class="s1">&#39;vlad&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="kp">false</span>&#x000A;  <span class="n">gem</span> <span class="s1">&#39;vlad-git&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="kp">false</span>&#x000A;  <span class="n">gem</span> <span class="s1">&#39;vlad-extras&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="kp">false</span>&#x000A;<span class="k">end</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<h3>Rakefile</h3>&#x000A;&#x000A;<p>Add this snippet to your Rakefile, just before <code>MyApp::Application.load_tasks</code></p>&#x000A;&#x000A;<div class="highlight"><pre><span class="k">if</span> <span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">development?</span>&#x000A;  <span class="k">begin</span>&#x000A;    <span class="nb">require</span> <span class="s1">&#39;vlad&#39;</span>&#x000A;    <span class="nb">require</span> <span class="s1">&#39;vlad-extras&#39;</span>&#x000A;    <span class="no">Vlad</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="ss">scm</span><span class="p">:</span> <span class="ss">:git</span><span class="p">,</span> <span class="ss">web</span><span class="p">:</span> <span class="ss">:nginx</span><span class="p">,</span> <span class="ss">app</span><span class="p">:</span> <span class="ss">:passenger</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="ss">:rails</span><span class="p">)</span>&#x000A;  <span class="k">rescue</span> <span class="no">LoadError</span>&#x000A;    <span class="nb">puts</span> <span class="s1">&#39;Could not load Vlad&#39;</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>You might have to configure the options given to <code>Vlad.load</code>.</p>&#x000A;&#x000A;<p>If you want to get started, take a look at <a href="http://hitsquad.rubyforge.org/vlad/">the documentation</a> to find out about the parts that this post leaves out.</p>&#x000A;&#x000A;<h2>Troubleshooting</h2>&#x000A;&#x000A;<p>This part is about some trouble I&#8217;ve had and it is not really Vlad specific. You might encounter these problems when trying to deploy to your production server and maybe these tips and links will help.</p>&#x000A;&#x000A;<h3>The deployment shell environment</h3>&#x000A;&#x000A;<p>If Vlad does not find some commands, try the following:</p>&#x000A;&#x000A;<p>To enable per user PATH environments for ssh logins you need to add to your <code>sshd_config</code>:</p>&#x000A;&#x000A;<pre><code>PermitUserEnvironment yes&#x000A;</code></pre>&#x000A;&#x000A;<p>After that, restart sshd!</p>&#x000A;&#x000A;<p>Then in your users ssh home directory (<code>~/.ssh/environment</code>), add something to this effect (your mileage will vary):</p>&#x000A;&#x000A;<pre><code>PATH=/opt/ruby-1.9.3/bin:/usr/local/bin:/bin:/usr/bin&#x000A;</code></pre>&#x000A;&#x000A;<p>For details on that, see this article on <a href="http://zerobearing.com/2009/04/27/capistrano-rake-command-not-found">setting the deployment shell environment</a></p>&#x000A;&#x000A;<h3>SSH Agent Forwarding</h3>&#x000A;&#x000A;<p>Maybe you also need to configure SSH Agent Forwarding:</p>&#x000A;&#x000A;<pre><code>$ ssh-add ~/.ssh/&lt;private_keyname&gt;&#x000A;</code></pre>&#x000A;&#x000A;<p>Edit your <code>~/.ssh/config</code> file and add something like this:</p>&#x000A;&#x000A;<pre><code>Host &lt;name&gt;&#x000A;  HostName &lt;ip or host&gt;&#x000A;  User &lt;username&gt;&#x000A;  IdentityFile ~/.ssh/&lt;filename&gt;&#x000A;  ForwardAgent yes&#x000A;</code></pre>&#x000A;&#x000A;<p>For details on that see this article on <a href="http://jordanelver.co.uk/articles/2008/07/10/rails-deployment-with-git-vlad-and-ssh-agent-forwarding/">SSH Agent Forwarding</a></p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2012-01-25T13:59:00+01:00">&#x000A;        <div class="top">Jan 12</div>&#x000A;        <div class="day">25</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/seeds-for-different-environments">Seeds for different environments</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>Here&#8217;s a little Rails tip for splitting up seed data for various environments:&#x000A;Create the folder <code>db/seeds/</code>. For each environment you want to seed put a file in there named after the env. Your general seeds are put into <code>db/seeds/all.rb</code>. Here&#8217;s what it might look like:</p>&#x000A;&#x000A;<pre><code>|___seeds&#x000A;| |___all.rb&#x000A;| |___development.rb&#x000A;| |___staging.rb&#x000A;| |___production.rb&#x000A;|___seeds.rb&#x000A;</code></pre>&#x000A;&#x000A;<p>Change the content of your <code>db/seeds.rb</code> to something like this:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="o">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">seed</span><span class="o">|</span>&#x000A;  <span class="n">seed_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="si">}</span><span class="s2">/db/seeds/</span><span class="si">#{</span><span class="n">seed</span><span class="si">}</span><span class="s2">.rb&quot;</span>&#x000A;  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="n">seed_file</span><span class="p">)</span>&#x000A;    <span class="nb">puts</span> <span class="s2">&quot;*** Loading </span><span class="si">#{</span><span class="n">seed</span><span class="si">}</span><span class="s2"> seed data&quot;</span>&#x000A;    <span class="nb">require</span> <span class="n">seed_file</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>Running <code>rake db:seed</code> will now load up the seed data defined in <code>db/seeds/all.rb</code> and the current environment.</p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <article>&#x000A;    <header>&#x000A;      <time class="pubdate" datetime="2011-12-07T15:00:00+01:00">&#x000A;        <div class="top">Dec 11</div>&#x000A;        <div class="day"> 7</div>&#x000A;      </time>&#x000A;      <h1><a href="/blog/configuring-nginx-for-the-asset-pipeline">Configuring Nginx for the Asset Pipeline</a></h1>&#x000A;    </header>&#x000A;    <div class="content">&#x000A;      <p>Following up on the series of posts about the Rails Asset Pipeline, here are some things to keep in mind when you are using Nginx as your webserver.</p>&#x000A;&#x000A;<h3>Installation via Passenger</h3>&#x000A;&#x000A;<p>When you are installing Nginx automatically with the script that comes with Passenger, you will not be able to serve the gzipped file variants that get precompiled. That&#8217;s because Passenger currently does not configure Nginx with the <code>http_gzip_static_module</code> that would be necessary for including the directive <code>gzip_static on</code>. I&#8217;ve opened a pull request for that, but for now you&#8217;ll have to choose the manual installation, if that&#8217;s what you are after - and why wouldn&#8217;t you?</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="c"># download and untar nginx</span>&#x000A;wget -O /tmp/nginx.tar.gz http://www.nginx.org/download/nginx-1.0.10.tar.gz&#x000A;tar xzvf /tmp/nginx.tar.gz&#x000A;rm /tmp/nginx.tar.gz&#x000A;&#x000A;<span class="c"># install nginx via passenger install script, already includes</span>&#x000A;<span class="c"># --with-http_ssl_module</span>&#x000A;<span class="c"># --add-module for passenger</span>&#x000A;passenger-install-nginx-module --auto --prefix<span class="o">=</span><span class="s1">&#39;/opt/nginx&#39;</span> --nginx-source-dir<span class="o">=</span><span class="s1">&#39;/tmp/nginx-1.0.10&#39;</span> --extra-configure-flags<span class="o">=</span><span class="s2">&quot;--with-http_gzip_static_module&quot;</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>You might want to change the version and prefix to fit your needs. Like mentioned in the comments you don&#8217;t have to take care of including the passenger or ssl module, because the installation script adds them automatically.</p>&#x000A;&#x000A;<h3>Nginx configuration</h3>&#x000A;&#x000A;<p>This is already part of the <a href="http://guides.rubyonrails.org/asset_pipeline.html#in-production">Asset Pipeline Guide</a>, but I&#8217;ll mention it here again, so that this article is complete - here are the directives for the assets location config:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="k">location</span> <span class="p">~</span> <span class="sr">^/(assets)/</span>  <span class="p">{</span>&#x000A;  <span class="kn">root</span> <span class="s">/path/to/site</span><span class="p">;</span>&#x000A;  <span class="kn">gzip_static</span> <span class="no">on</span><span class="p">;</span>&#x000A;  <span class="kn">expires</span> <span class="s">max</span><span class="p">;</span>&#x000A;  <span class="kn">add_header</span> <span class="s">Cache-Control</span> <span class="s">public</span><span class="p">;</span>&#x000A;  <span class="c1"># access_log /dev/null;</span>&#x000A;<span class="p">}</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p><del>I&#8217;ve also disabled access logging, so that asset requests do not clutter up the log.</del></p>&#x000A;&#x000A;<p>Mathias <a href="https://twitter.com/#!/roidrage/status/144335957158658048">brought up a good point</a>, why one might not want to do that.</p>&#x000A;&#x000A;<h3>Sendfile Header</h3>&#x000A;&#x000A;<p>In your app&#8217;s <code>production.rb</code> you should uncomment to following line, to let Nginx send static files:</p>&#x000A;&#x000A;<div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">action_dispatch</span><span class="o">.</span><span class="n">x_sendfile_header</span> <span class="o">=</span> <span class="s1">&#39;X-Accel-Redirect&#39;</span>&#x000A;</pre>&#x000A;</div>&#x000A;&#x000A;&#x000A;<h3>Verify that it&#8217;s working</h3>&#x000A;&#x000A;<p>After deploying the changes, you can check if Nginx is now serving the gzipped compressed versions of your asset files. For that you can use tools like this&#x000A;<a href="http://www.whatsmyip.org/http-compression-test/">HTTP Compression Tester</a> and enter the address of your <code>application.js</code> and <code>application.css</code></p>&#x000A;    </div>&#x000A;  </article>&#x000A;  <p>&#x000A;    <small><a href="/archives">Ältere Artikel im Archiv</a></small>&#x000A;  </p>&#x000A;</section></div>
    <div id="footer">
      <div class='vcard' id='contact'>
        <span class='fn'>Dennis Reimann</span>
        <p class='adr'>
          <span class='street-address'>Ottjen-Alldag-Str. 32</span>
          <br />
          <span class='postal-code'>D-28277</span>
          <span class='locality'>Bremen</span>
        </p>
        <p>
          <span class='web'><a class="url" href="http://dennisreimann.de/" rel="me">dennisreimann.de</a></span>
          <br />
          <span class='mail'><a class="email" href="mailto:mail@dennisreimann.de" rel="me">mail@dennisreimann.de</a></span>
          <br />
          <span class='tel'>+49 (0)151 22 63 03 17</span>
        </p>
        <p>
          <small><a href="/contact">Kontaktdetails</a></small>
        </p>
        <ul class='social'>
          <li><a href="https://github.com/dennisreimann" rel="me">GitHub</a></li>
          <li><a href="https://twitter.com/dennisreimann" rel="me">Twitter</a></li>
          <li><a href="http://www.xing.com/profile/Dennis_Reimann5" rel="me">XING</a></li>
        </ul>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-376258-21']);
        _gaq.push(['_gat._anonymizeIp']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
        })();
      //]]>
    </script>
  </body>
</html>
