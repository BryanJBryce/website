<!DOCTYPE html>
<html>
  <head>
    <title>Rails: Sind echte Permalinks es wert? | Dennis Reimann, Softwareentwickler</title>
    <script src='/javascripts/head.min.js'></script>
    <script type='text/javascript'>
      //<![CDATA[
        head.js(
          "https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js",
          "http://www.google-analytics.com/ga.js",
          "/fancybox/jquery.fancybox-1.3.4.pack.js",
          "/fancybox/jquery.easing-1.3.pack.js",
          "/javascripts/website.js",
          function(){Website.init()});
      //]]>
    </script>
    <link href='/atom.xml' rel='alternate' title='//dennisreimann' type='application/atom+xml' />
    <link href='/stylesheets/print.css' media='print' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/screen.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://dennisreimann.de/blog/rails-sind-echte-permalinks-es-wert' rel='canonical' />
    <link href='http://openid.dennisreimann.de/server' rel='openid2.provider openid.server' />
    <link href='http://openid.dennisreimann.de/dennisreimann' rel='openid2.local_id openid.delegate' />
    <!--[if IE]>
      <link href='/stylesheets/ie.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <![endif]-->
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta content='BRi3ql7JvxxFP2KtBRHIV6Rfzn0ZN7xJF1NNtnEUaI8' name='google-site-verification' />
    <meta content='app-id=669642611,affiliate-data=10l5ET' name='apple-itunes-app' />
    <meta content='Vor nicht allzulanger Zeit habe ich über eine Methode geschrieben, mit der man sehr einfach sprechende URLs in Ruby on Rails einbauen kann. Dabei wird etwas gecheatet, denn die ID über welche die eigentliche Referenzierung läuft ist noch ein Teil der URL. Wie sieht es aber aus, wenn man die ID auch noch loswerden will?' name='description' />
    <meta content='Ruby on Rails' name='keywords' />
  </head>
  <body>
    <div id="header">
      <div id='identity'>
        <a href='/' id='logo'>
          <span id='slashes'>//</span>
          <span id='name'>dennisreimann</span>
        </a>
        <div id='claim'>
          Softwareentwickler
        </div>
      </div>
    </div>
    <div id="main">
      <article>
        <header>
          <time class='pubdate' datetime='2007-03-29T11:49:00+02:00'>
            <div class='top'>Mar '07</div>
            <div class='day'>29</div>
          </time>
          <h1>Rails: Sind echte Permalinks es wert?</h1>
        </header>
        <div class='content'><p>Vor nicht allzulanger Zeit habe ich über eine Methode geschrieben, mit der man sehr einfach <a href="/blog/rails-permalinks-fuer-modelle/">sprechende URLs in Ruby on Rails einbauen</a> kann. Dabei wird etwas gecheatet, denn die ID über welche die eigentliche Referenzierung läuft ist noch ein Teil der URL. Wie sieht es aber aus, wenn man die ID auch noch loswerden will?&#x000A;Vorweg: Dieser Artikel ist kein Tutorial dazu, sondern viel mehr ein Abwägen des Für und Widers, denn das Erzeugen und Verarbeiten von richtig cleanen URLs ist mit einem Aufwand verbunden, welcher aus meiner Sicht den Wert des Nutzens übersteigt.</p>&#x000A;&#x000A;<!--more-->&#x000A;&#x000A;&#x000A;<p>Wir wollten bei <a href="http://venteria.com">wevent</a> cleane URLs einsetzen, haben uns aber letztendlich aus mehreren Gründen dagegen entschieden:</p>&#x000A;&#x000A;<h4>1. Alles nicht so einfach wie gedacht</h4>&#x000A;&#x000A;&#x000A;<p>Für jedes Modell, welches per Permalink referenziert werden soll, <em>muss</em> es eine extra Eigenschaft  <code>permalink</code> oder ähnliches geben. Grund dafür ist, dass wir uns auf den Namen  alleine nicht verlassen können - dies geht zwar bei einfachen Worten, sobald aber Umlaute oder Leerzeichen ins Spiel kommen, können wir danach nicht mehr über den Namen (beispielsweise einer Stadt) aus der DB selektieren:</p>&#x000A;&#x000A;<pre>http://beta.wevent.org/cities/Muenchen</pre>&#x000A;&#x000A;&#x000A;<p>Ist das &#8220;ue&#8221; im  Permalink jetzt drin, weil die unsere <code>to_permalink</code>-Methode es generiert hat  oder steht der Name schon mit &#8220;ue&#8221; in der DB? &#8220;München&#8221; und &#8220;Muenchen&#8221; könnten wir nicht unterscheiden (um mal eines der unwahrscheinlicheren  Beispiele zu nennen ;)).</p>&#x000A;&#x000A;<h4>Also mit einer extra Eigenschaft&#8230;</h4>&#x000A;&#x000A;&#x000A;<p>Eine Eigenschaft <code>permalink</code>, welche von anderen Modellattributen wie Name oder Datum abhängig ist bedeutet Wartungsaufwand: Es <em>muss</em> garantiert sein, dass der Permalink angepasst wird, wenn sich eine der Eigenschaften von denen er abhängt ändert, da sonst die Referenzierung über die URL nicht mehr läuft&#8230; von der Fehleranfälligkeit abgesehen müssten wir auch alle schon in der DB vorhandenen Instanzen updaten, damit sie auch einen Permalink haben (lässt sich automatisieren, trotzdem bedeutet es Aufwand).</p>&#x000A;&#x000A;<h4>Generierte RESTful Routes greifen nicht mehr</h4>&#x000A;&#x000A;&#x000A;<p>Vorgabe für die von Rails per <code>map.resources</code> generierten Routes ist es, dass die referenzierende Eigenschaft die ID ist - bedeutet im Umkehrschluß für uns, dass wir die generierten Routes nicht mehr nutzen können und sowohl für alle  bestehenden Actions als auch für alle die noch dazukommen immer selber Routes anlegen müssen&#8230; bitte?</p>&#x000A;&#x000A;<h4>Preis/Leistung stimmt nicht</h4>&#x000A;&#x000A;&#x000A;<p>Für mich rechtfertigt der letztendliche Nutzen den Aufwand nicht, wenn man bedenkt, dass es nur um saubere URLs geht, die Implementierung unseren Code aufbläht und das System fehleranfälliger macht. Vielleicht wird es dafür ja mal Plugins geben - dann kann man drüber nachdenken, beim aktuellen Stand sehe ich allerdings davon ab, es mit aufzunehmen. Ich fände es auch schöner pretty URLs zu haben - das was wir jetzt haben ist allerdings mit 3 Zeilen Code pro Modell realisiert, wenn wir den nächsten Schritt gehen wollten, brauchen wir dafür einiges mehr an Code - für mich scheidet das vorerst raus.</p></div>
        <div class='follow'>
          <p>
            Guter Artikel? Folge mir auf
            <a class="twitter" href="https://twitter.com/dennisreimann">Twitter</a>
            oder
            <a class="github" href="https://github.com/dennisreimann">GitHub</a>
          </p>
        </div>
        <div class='teaser' id='iOctocat' itemscope='itemscope' itemtype='http://schema.org/SoftwareApplication'>
          <a href='http://ioctocat.com'>
            <img alt='iOS app for GitHub' itemprop='image' src='/images/ioctocat.png' />
          </a>
          <h3 itemprop='name'>
            <a href='http://ioctocat.com'>iOctocat</a>
          </h3>
          <p itemprop='description'>
            ist GitHub für die Hosentasche - deine Projekte und das was dort passiert
            immer dabei mit deinem
            <span itemprop='device'>iPhone und iPod Touch.</span>
            <br />
            Die App ist
            <a href="http://ioctocat.com/appstore-iphone" itemprop="url">im App Store erhältlich</a>
          </p>
          <link href='http://schema.org/SocialNetworkingApplication' itemprop='SoftwareApplicationCategory' />
        </div>
      </article>
    </div>
    <div id="footer">
      <div class='vcard' id='contact'>
        <span class='fn'>Dennis Reimann</span>
        <p class='adr'>
          <span class='street-address'>Ottjen-Alldag-Str. 32</span>
          <br />
          <span class='postal-code'>D-28277</span>
          <span class='locality'>Bremen</span>
        </p>
        <p>
          <span class='web'><a class="url" href="http://dennisreimann.de/" rel="me">dennisreimann.de</a></span>
          <br />
          <span class='mail'><a class="email" href="mailto:mail@dennisreimann.de" rel="me">mail@dennisreimann.de</a></span>
          <br />
          <span class='tel'>+49 (0)151 22 63 03 17</span>
        </p>
        <p>
          <small><a href="/contact">Kontaktdetails</a></small>
        </p>
        <ul class='social'>
          <li><a href="https://github.com/dennisreimann" rel="me">GitHub</a></li>
          <li><a href="https://twitter.com/dennisreimann" rel="me">Twitter</a></li>
          <li><a href="http://www.xing.com/profile/Dennis_Reimann5" rel="me">XING</a></li>
        </ul>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-376258-21']);
        _gaq.push(['_gat._anonymizeIp']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
        })();
      //]]>
    </script>
  </body>
</html>
