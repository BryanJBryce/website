<!DOCTYPE html>
<html>
  <head>
    <title>Rails: Permalinks für Modelle | Dennis Reimann, Softwareentwickler</title>
    <script src='/javascripts/head.min.js'></script>
    <script type='text/javascript'>
      //<![CDATA[
        head.js(
          "https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js",
          "http://www.google-analytics.com/ga.js",
          "/fancybox/jquery.fancybox-1.3.4.pack.js",
          "/fancybox/jquery.easing-1.3.pack.js",
          "/javascripts/website.js",
          function(){Website.init()});
      //]]>
    </script>
    <link href='/atom.xml' rel='alternate' title='//dennisreimann' type='application/atom+xml' />
    <link href='/stylesheets/print.css' media='print' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/screen.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://dennisreimann.de/blog/rails-permalinks-fuer-modelle' rel='canonical' />
    <link href='http://openid.dennisreimann.de/server' rel='openid2.provider openid.server' />
    <link href='http://openid.dennisreimann.de/dennisreimann' rel='openid2.local_id openid.delegate' />
    <!--[if IE]>
      <link href='/stylesheets/ie.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <![endif]-->
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta content='BRi3ql7JvxxFP2KtBRHIV6Rfzn0ZN7xJF1NNtnEUaI8' name='google-site-verification' />
    <meta content='app-id=669642611,affiliate-data=10l5ET' name='apple-itunes-app' />
    <meta content='Wieder eine herrlich einfache Sache mit großer Wirkung: Um Permalinks - bzw. sprechende URLs - für seine Modelle einzubauen ist nur das Überschreiben der to_param Methode nötig.' name='description' />
    <meta content='Ruby on Rails' name='keywords' />
  </head>
  <body>
    <div id="header">
      <div id='identity'>
        <a href='/' id='logo'>
          <span id='slashes'>//</span>
          <span id='name'>dennisreimann</span>
        </a>
        <div id='claim'>
          Softwareentwickler
        </div>
      </div>
    </div>
    <div id="main">
      <article>
        <header>
          <time class='pubdate' datetime='2007-03-08T09:00:00+01:00'>
            <div class='top'>Mar '07</div>
            <div class='day'> 8</div>
          </time>
          <h1>Rails: Permalinks für Modelle</h1>
        </header>
        <div class='content'><p>Wieder eine herrlich einfache Sache mit großer Wirkung: Um Permalinks - bzw. sprechende URLs - für seine Modelle einzubauen ist nur eine Methode nötig:</p>&#x000A;&#x000A;<p>In diesem Fall haben wir ein User-Modell, für welches die Methode <code>to_param</code> ganz einfach einen String mit der ID und dem Usernamen (bspw. <code>1-Dennis</code>) zurückgibt - mehr muss man im Grunde gar nicht tun, da Rails den Rest handhabt.</p>&#x000A;&#x000A;<h4>Where the magic happens&#8230;</h4>&#x000A;&#x000A;&#x000A;<p>Der Schlüssel zum Erfolg liegt darin, immer die ID des Modells als ersten Teil der URL zu haben - der restliche String spielt keine Rolle, kann jedoch für Suchmaschinen sehr relevant sein. Wenn wir das Modell nun im View beispielsweise so verlinken</p>&#x000A;&#x000A;<p>wird Rails bei der Generierung der Route die <code>to_param</code> Methode des Users aufrufen, welche standardmäßig die ID des Modells zurückgibt. Da wir die Methode allerdings überschrieben haben, wird der von uns zurückgegebene Wert genommen. Wichtig dabei ist, dass die ID im View nicht direkt per <code>:id =&amp;gt; @user.id</code> übergeben wird, da Rails sich sonst mit der ID begnügt und <code>to_param</code> nicht mehr aufruft.</p>&#x000A;&#x000A;<p>Rails-intern wird beim Verarbeiten der URL der String, welcher laut Route die ID enthält (in unserem Fall <code>1-Dennis</code>) in einen <code>Integer</code> umgewandelt - dabei geht der nicht-numerische Teil verloren und es bleibt nur die ID des Modells zurück. Daher ist es unter anderem auch möglich, dass sich beispielsweise der Name des Users ändern kann, ohne Auswirkungen auf bereits indizierte URLs zu haben: Es kommt nur auf die ID an, <code>1-Dennis</code> ist also das gleiche wie <code>1-dbloete</code> und so weiter&#8230;</p></div>
        <div class='follow'>
          <p>
            Guter Artikel? Folge mir auf
            <a class="twitter" href="https://twitter.com/dennisreimann">Twitter</a>
            oder
            <a class="github" href="https://github.com/dennisreimann">GitHub</a>
          </p>
        </div>
        <div class='teaser' id='iOctocat' itemscope='itemscope' itemtype='http://schema.org/SoftwareApplication'>
          <a href='http://ioctocat.com'>
            <img alt='iOS app for GitHub' itemprop='image' src='/images/ioctocat.png' />
          </a>
          <h3 itemprop='name'>
            <a href='http://ioctocat.com'>iOctocat</a>
          </h3>
          <p itemprop='description'>
            ist GitHub für die Hosentasche - deine Projekte und das was dort passiert
            immer dabei mit deinem
            <span itemprop='device'>iPhone und iPod Touch.</span>
            <br />
            Die App ist
            <a href="http://ioctocat.com/appstore-iphone" itemprop="url">im App Store erhältlich</a>
          </p>
          <link href='http://schema.org/SocialNetworkingApplication' itemprop='SoftwareApplicationCategory' />
        </div>
      </article>
    </div>
    <div id="footer">
      <div class='vcard' id='contact'>
        <span class='fn'>Dennis Reimann</span>
        <p class='adr'>
          <span class='street-address'>Ottjen-Alldag-Str. 32</span>
          <br />
          <span class='postal-code'>D-28277</span>
          <span class='locality'>Bremen</span>
        </p>
        <p>
          <span class='web'><a class="url" href="http://dennisreimann.de/" rel="me">dennisreimann.de</a></span>
          <br />
          <span class='mail'><a class="email" href="mailto:mail@dennisreimann.de" rel="me">mail@dennisreimann.de</a></span>
          <br />
          <span class='tel'>+49 (0)151 22 63 03 17</span>
        </p>
        <p>
          <small><a href="/contact">Kontaktdetails</a></small>
        </p>
        <ul class='social'>
          <li><a href="https://github.com/dennisreimann" rel="me">GitHub</a></li>
          <li><a href="https://twitter.com/dennisreimann" rel="me">Twitter</a></li>
          <li><a href="http://www.xing.com/profile/Dennis_Reimann5" rel="me">XING</a></li>
        </ul>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-376258-21']);
        _gaq.push(['_gat._anonymizeIp']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
        })();
      //]]>
    </script>
  </body>
</html>
